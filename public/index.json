
[{"content":"","date":"1 January 2026","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"I\u0026rsquo;m quite proud of the Homelab Stack I\u0026rsquo;ve created, it\u0026rsquo;s certainly grown over the years. It started off as a means of storing and streaming of my purchased music and progressed into something else entirely.\nPrevious Next This post details my home lab adventures so far and whats to come in the future\nThe Start of something new # I\u0026rsquo;ve never been a fan of music streaming services like spotify as i prefer to own my music and have built up a quite a large collection over the years. I also didn\u0026rsquo;t like the idea of storing personal files using cloud storage providers like google drive, Microsoft Onedrive and Apple Icloud. A Synology Nas was an option but i really wanted to build something myself.\nA spectacular video from German Youtuber \u0026ldquo;Wolfgang\u0026rsquo;s Channel\u0026rdquo; detailing the build process for a custom NAS sparked my interest, i but was turned off due to my lack understanding of Linux at the time (2021). It wasn\u0026rsquo;t until i deleted my windows install and fully migrated to Arch Linux back in 2022 that i decided to revisit the idea again with new found vigour.\nObjectives # Me being the over thinker that i am wanted to identify all of my current requirements and take future requirements into consideration:\nAll in one - Wanted to be able to host services in addition it being a NAS. Quiet and power efficient - Server would live in my room, on my desk so it couldn\u0026rsquo;t be loud. Small - Ideally ITX form factor so it\u0026rsquo;s not cumbersome to tinker with or store. No vendor lock in or subscriptions - The Primary reason for doing this Flexible and Cheap to expand/scale Choice of hardware (At the start üòÖ) # At the start i made of use of several components i had lying around from my first PC build and purchased everything else, see link for my adventures into the PC master iceberg:\nDECEMBER 2022 SEPTEMBER 2023 - NOVEMBER 2023 JUNE 2024 - AUGUST 2025 Case Jonsbo n1 CPU Intel Core i5-6400 Cooler Cryorig C7 Motherboard MSI B150I Gaming PRO AC Memory 2 x 8 GB DDR4-2400 CL16 Power Supply EVGA SuperNOVA 650 G1+ Boot Drive 2 TB Seagate Firacuda NVMe 520 NAS Storage 2 x 12 TB Western Digital Red Plus HDD + 1 TB Seagate Barracuda HDD Network 1GbE Realtek¬Æ RTL8111H NIC Add-on Cards LSI HBA PCIe 2.0 SAS Card (IT mode) CPU Intel Core i5-12500T Motherboard ASRock Z690 ITX Memory 2 x 32GB DDR4 3200MHz CL22 Case Jonsbo n1 Boot Drive + VM Storage 2 x 1.92TB Intel S4500 SSDs NAS Storage 2 x 12TB Western Digital Red Plus HDD 1 x 3.84TB Kingston DC500R SSD\n1 x 1TB Seagate Barracuda HDD Network 2.5 GbE Realtek NIC + 1GbE Intel I219V NIC CPU Intel Core i5-14500 Motherboard ASRock Z690 ITX Memory 2 x 32GB DDR4 3200MHz CL22 Case Silverstone RM21-308 Boot Drive 1 x 480GB Intel S3510 SSD VM Storage 2 TB Seagate Firacuda NVMe 520 + Intel S4500 960GB SSD NAS Storage 1 x 4TB Transcend SSD470K SSD\n1 x 3.84TB Kingston DC500R SSD\n2 x 12TB Western Digital Red Plus HDDs\n2 x 12TB Ultrastar DC HC520 HDDs Network 2.5 GbE NIC And 2 Mini PCs from Ebay with the same specs (The deals were too good to pass)\nPC MINISFORUM UN100P Memory 1 x 16GB DDR4 3200MHz SODIMM Boot + VM Drive 1 x Intel S4500 1.92TB SSD VM Storage 1 X 1TB IronWolf 525 Network 2.5 GbE NIC Choice of Operating Systems # To satisfy the \u0026ldquo;all in one\u0026rdquo; requirement for my homelab i could have just installed ubuntu server edition and left it at that. But me being the chronic tinkerer that i am wanted to be able to break things without having reinstall the core os (Had already broken several arch based installs already at this point). I stumbled across Perfect Media Server by Alex Kretzschmar which suggested using proxmox as the core OS.\nProxmox VE is a type 1 hypervisor based on debian that\u0026rsquo;s free to deploy, has very few limits imposed on users without a Enterprise Subscription and has a fantastic web interface and shell. It can used to provision traditional virtual machines and linux containers (LXC). ![[image-70.png|1422x800]]\nI do have experience supporting Vmware infrastructure in my MSP Cloud Analyst role but didn\u0026rsquo;t consider it an option due to the shear difference in free feature set (in 2023):\nProxmox VE:\nFull clustering capabilities High availability Live migration Backup and restore tools with advanced features (deduplication, compression, incremental backups) Both KVM (full virtualization) and LXC (containers) Web-based management interface ZFS, LVM, iSCSI, NFS storage support No core or memory limitations VMware ESXi:\nCould only run on a limited number of cores and had extremely limited memory No vCenter Server access - Centralised Panel/dashboard for managing multiple ESXI servers. No Distributed Resource Scheduler No fault tolerance Free Edition completely dropped into 2024 accompanied by significant licensing changes which burned a lot of companies wallets. üíΩ Choice of NAS # Openmediavault was my goto NAS option at the time. Its based on Debian under the hood and provided all require services (Hdparm, NFS, Rsync, SSH, S.M.A.R.T, SMB ) out of the box or via plugins (ZFS Support). Note - I will admit the initial configuration of services and disks can be quite tedious due to the config confirmation nature of OMV, every change needs to be confirmed/applied and it\u0026rsquo;s in your best interest to not commit multiple changes at once. As a config error may force you revert them. (Speaking from experience)\nThere were other DIY solutions at the time, but these didn\u0026rsquo;t meet my requirements for a number of reasons:\nUbuntu Server (CLI) - I wasn\u0026rsquo;t comfortable manually configuring all backed services at the time and wanted something that just worked so i start tinkering with services. There are gui apps such Red Hat\u0026rsquo;s Cockpit and webmin which can installed on ubuntu server, but i found those to be a bit finicky. Obviously now i am aware the CLI is the superior way due to things with scripting and automation. Unraid - requires a license to use after 30 days. It was also way too web gui oriented for my liking. Note - There is a fork of unraid open-source md_unraid kernel driver called non-raid TrueNAS\u0026rsquo; ZFS is a fantastic filesystem, but it requires all the drives to be spun up all the time (see this postüôÉ) which increases power usage by 20w-30w. In addition to require purchasing drives in sets to expand available storage depending on the raid setup. Filesystems - The bread and butter # Below are the filesystems in use:\nXFS - Deployed on a ZFS - File system for mission critical data i.e family photo\nmergerfs is used to combine multiple disks into a single unified directory Pools multiple drives into one mountable volume Supports addition and removal of devices with no rebuild times Permits drives with mismatched sizes with no penalties Each drive has an individually readable filesystem (ext4, xfs, zfs, etc) Drives may contain data when mounted via Mergerfs Simple configuration with one line in /etc/fstab (example below) /mnt/disk* /mnt/storage fuse.mergerfs defaults,nonempty,allow_other,use_ino,cache.files=off,moveonenospc=true,category.create=mfs,dropcacheonclose=true,minfreespace=250G,fsname=mergerfs 0 0 ![[image-71.png|1009x800]]\nProvide fault tolerance to protect against (inevitable) hard drive failure Checksum files to guard against bitrot Support hard drives of differing / mismatched sizes Enable incremental upgrading of hard drives in batches as small as one Each drive should have a separately readable filesystem with no striping of data ![[image-74.png|769x800]] PCIE PASSTHROUGH # Did i forget mention the NAS was virtualized? While researching Proxmox i discovered you can pass-through PCIE devices into VMs so they appear as native devices. The idea of leaving the NAS disk exposed on proxmox and provisioning block storage from them to be virtualized on OMV felt gross and i wanted near native performance from OMV\nBelow is the general process for systems using systemd-boot:\n# 1. Confirm VT-d (Intel) or AMD-Vi (AMD) is available/enabled in the bios for IOMMU support. # 2. Configure kernel command line for IOMMU echo \u0026#34;intel_iommu=on iommu=pt\u0026#34; \u0026gt; /etc/kernel/cmdline # 3. Configure required VFIO modules cat \u0026gt; /etc/modules \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; vfio vfio_iommu_type1 vfio_pci vfio_virqfd EOF # Verify VFIP Modules are loaded lsmod | grep vfio # Confirm IOMMU is enabled via dmesg | grep -e DMAR -e IOMMU # Identify PCI IDS/drivers using LSPCI lspci -nnk # 3. Configure VFIO PCI IDs and blacklist conflicting drivers cat \u0026gt; /etc/modprobe.d/pve-blacklist.conf \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; options vfio-pci ids=1000:0072,8086:4690 blacklist mpt3sas blacklist i915 EOF # 4. Apply changes proxmox-boot-tool refresh \u0026amp;\u0026amp; update-initramfs -u -k all Once this is done the driver in use should change to \u0026ldquo;vfio-pci\u0026rdquo; LSI HBA SAS Controller:\n01:00.0 RAID bus controller [0104]: Broadcom / LSI SAS2008 PCI-Express Fusion-MPT SAS-2 [Falcon] [1000:0072] (rev 03) Subsystem: Fujitsu Technology Solutions HBA Ctrl SAS 6G 0/1 [D2607] [1734:1177] Kernel driver in use: vfio-pci Kernel modules: mpt3sas 00:02.0 VGA compatible controller [0300]: Intel Corporation AlderLake-S GT1 [8086:4680] (rev 0c) Subsystem: ASRock Incorporation Device [1849:4680] Kernel driver in use: vfio-pci Kernel modules: i915, xe üêï‚Äçü¶∫ Services # Crowdsec - Multi server Config Home Assistant Hugo Webserver (Used before switching to local development) Immich Jellyfin (Music Streaming) Kasm Workspaces LinuxGSM Navidrome Nginx Proxy Manager Plus (Has crowdsec nginx bouncer support) Obsidian Livesync (via Couchdb) Pelican Panel Portainer Pterodactyl Tailscale Technitium DNS Vikunja Wazuh Siem - in testing üöÄ Future Improvements # Dedicated Hardware for Baremetal NAS # Running a NAS as a virtual machine has proven to be quite stable and flexible. But i would love to move it to dedicated hardware at some point, there is something about the setup that makes me feel like it\u0026rsquo;s a snake eating it\u0026rsquo;s own tail. Especially isn\u0026rsquo;t helpful if i have to switch of the proxmox node for maintenance. Considering getting another 2u chassis and moving proxmox to that instead?\nKubernetes on spare mini pc\u0026rsquo;s? # I honestly haven\u0026rsquo;t touched the 2 minisforum n100d mini pcs i bought them back in June besides installing proxmox on them, i bought them with initial idea of clustering them and messing with zfs/ceph replication. But i decided against it as i didn\u0026rsquo;t have enough services to warrant spreading them out. Now with my migration to Kubernetes from docker underway. I plan to install K3S or Talos Linux on them directly and cluster them\nRack mountable 2.5gb switch # I would like to purchase a 2.5gb managed switch, i tried Mikrotik 2.5gbe switch however it was way too loud and would ports would randomly drop out. The 1GBE bandwidth limitation imposed my mikrotik isn\u0026rsquo;t causing 30 pound is potential temporary solution, but i would like something with at 12 ports that is rack mountable\nExperimental SRIOV support of Intel IGPU # NIXOS NAS # üìöSources # https://liliputing.com/minisforum-un100p-mini-pc-comes-with-intel-n100-and-n150-processor-options/ https://pve.proxmox.com/wiki/PCI(e)_Passthrough https://www.servethehome.com/how-to-pass-through-pcie-nics-with-proxmox-ve-on-intel-and-amd/ Perfect Media Server by Alex Kretzschmar (Ironicbadger) The Perfect Home Server Build! 18TB, 10Gbit LAN, Quiet \u0026amp; Compact by Wolfgang\u0026rsquo;s Channel Building a Homelab Server Rack by Wolfgang\u0026rsquo;s Channel Building a Power Efficient Home Server! by Wolfgang\u0026rsquo;s Channel Busting 8 Common Homelab Power Efficiency Myths by Wolfgang\u0026rsquo;s Channel\n","date":"1 January 2026","externalUrl":null,"permalink":"/posts/state-of-the-homelab-2026/","section":"Posts","summary":"","title":"State of the Homelab 2026","type":"posts"},{"content":"Welcome to my website! I\u0026rsquo;m really happy you stopped by.\n","date":"1 January 2026","externalUrl":null,"permalink":"/","section":"Welcome to Blowfish!","summary":"","title":"Welcome to Blowfish!","type":"page"},{"content":"test\n","date":"25 October 2025","externalUrl":null,"permalink":"/posts/arch-linux-cli-install/","section":"Posts","summary":"","title":"Arch Linux - CLI Install","type":"posts"},{"content":" Custom Home Network Infrastructure # A self-managed home network built for reliability, security, and seamless integration with a Proxmox-based homelab.\nüìå Overview # This post outlines the design and maintenance of my custom home network infrastructure.\nThe network is built to support a virtualized homelab environment, multiple client devices, and self-hosted services while maintaining strong security and performance.\nüß† Design Goals # Reliable internet connectivity Strong network segmentation and security Support for virtualization and self-hosted services Scalable switching and wireless coverage üß± Network Topology # ISP \u0026amp; Edge # ISP Modem: BT ONT Router / Firewall: OPNsense OPNsense serves as the core routing, firewalling, and gateway platform.\nSwitching \u0026amp; Wired Infrastructure # Switch: MikroTik managed switch Powerline Adapters: Used where structured cabling is unavailable Client Devices: Desktops, servers, peripherals, and IoT devices Wireless # Access Point: TP-Link AP Centralized wireless coverage for mobile and IoT devices üñ•Ô∏è Homelab Integration # The network is tightly integrated with a Proxmox Virtual Environment running as an all-in-one homelab server.\nHosted Services # NAS (OpenMediaVault) Docker server CrowdSec Local API server Wazuh SIEM / XDR Game servers Kasm Workspaces (DaaS) üîê Security Architecture # Stateful firewalling via OPNsense Intrusion detection and prevention: CrowdSec Wazuh SIEM / XDR Network segmentation (VLANs if applicable) Controlled ingress through reverse proxy services üìä Monitoring \u0026amp; Management # Centralized logging (optional) Traffic visibility and firewall logging Device-level monitoring üöÄ Future Enhancements # VLAN-based network segmentation 2.5 GbE or 10 GbE core upgrades Improved wireless coverage Redundant internet connection üìù Closing Thoughts # This network provides a solid foundation for both everyday usage and advanced homelab experimentation.\nCombining enterprise-grade open-source tools with consumer hardware offers excellent flexibility at minimal cost.\nLast updated: YYYY-MM-DD\n","date":"25 July 2025","externalUrl":null,"permalink":"/posts/opnsense-firewall-router/home-network-setup/","section":"Posts","summary":"","title":"Home Network Setup","type":"posts"},{"content":"An ambitious IT Support Engineer with over 3 years of experience in Cloud Based and on-premises Windows Infrastructure, in addition to supporting Linux Based Servers and Firewalls, Cyber security remediation, Email Security and server maintenance. Looking to progress from a generalist position to a more Linux oriented role.\n","date":"25 July 2025","externalUrl":null,"permalink":"/about/about/","section":"Abouts","summary":"","title":"","type":"about"},{"content":"","date":"25 July 2025","externalUrl":null,"permalink":"/about/","section":"Abouts","summary":"","title":"Abouts","type":"about"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]